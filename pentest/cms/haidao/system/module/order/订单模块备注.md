## 订单接口

-	创建订单

		方法名   ：create($params)

		位置     ：moedel/order_model.class.php

		@return  : [boolean]

		调用示例 ：model('order','order','service')->create($params);

-   获取订单列表

		方法名   ：lists($sqlmap)

		位置     ：moedel/order_model.class.php

		@return  : [result]

		调用示例 ：model('order','order')->set_member_id($member_id)->lists($sqlmap);

-   根据订单信息获取当前状态(推荐)

		方法名   ：get_status_axis($order)

		位置     ：moedel/order_model.class.php

		@return  : [array]

		调用示例 ：model('order','order')->get_status_axis($order);

-   根据订单号修改订单

		方法名   ：update($sn , $params)

		位置     ：service/order_service.class.php

		@return  : [boolean]

		调用示例 ：model('order','order','service')->update($sn , $params);

-	设置订单

		方法名   ：set_order($sn ,$action ,$status ,$params)

		参数	 :  $sn 	: 订单号
					$action : 操作类型(order:订单 || pay:支付 || confirm:确认 || delivery:发货 || completion:完成 || return: 退货 || refund:退款)
					$status : 状态值(订单操作必填)
					$params : 附加参数(msg:日志内容,delivery_id:快递id,delivery_name:快递名称,								delivery_sn:快递单号)
					
				值说明
					order    (2：取消，3：回收，4：删除)

		位置     ：service/order_service.class.php

		@return  : [boolean]

		调用示例 ：model('order','order','service')->set_order($sn ,$action ,$status ,$params);

-	生成查询条件

		方法名   ：build_sqlmap($params)

		参数	 :  $params['type'] (1:待付款|2:待确认|3:待发货|4:已发货|5:已完成|6:已取消|7:已回收|8:已删除)
					$params['keyword'] 	关键词(订单号|收货人姓名|收货人手机)

		位置     ：service/order_service.class.php

		@return  : [(array) $sqlmap]

		调用示例 ：model('order','order','service')->build_sqlmap($params);


## 订单商品
	
-   根据订单ID获取订单商品

		方法名   ：get_by_order_id($order_id);

		位置     ： service/order_goods_service.class.php

		@return  : [result]

		调用示例 ：model('order_goods','order','service')->get_by_order_id($order_id);



## 购物车接口

-   获取当前用户购物车

		方法名   ：get_all()

		位置     ：service/cart_service.class.php

		@return  : [result]

		调用示例 ：model('cart','order','service')->get_all();

-   添加商品到购物车

		方法名   ：add($goods_id,$product_id,$nums,$member_id) 商品id & 商品产品id & 购买数量 & 会员id

		位置     ：service/cart_service.class.php

		@return  : [boolean]

		调用示例 ：model('cart','order','service')->add($goods_id,$product_id,$nums,$member_id);

-	获取购物车一条数据

		方法名   ：get_one($sqlmap)

		位置     ：service/cart_service.class.php

		@return  : (array) 数据结果

		调用示例 ：model('cart','order','service')->get_one($sqlmap);

-	设置购物车商品数量

		方法名   ：set_nums($key,$nums) 加密key & 购买数量

		位置     ：service/cart_service.class.php

		@return  : [boolean]

		调用示例 ：model('cart','order','service')->set_nums($key,$nums);

-	删除购物车记录
		
		方法名   ：delete_by_ids($params)        

		参数	 ：(array) 会员:购物车ids || 游客:products_ids

		位置     ：service/cart_service.class.php

		@return  : [boolean]

		调用示例 ：model('cart','order','service')->delete_by_ids($params);

-	清空购物车
		
		方法名   ：clear()

		位置     ：service/cart_service.class.php

		@return  : [boolean]

		调用示例 ：model('cart','order','service')->clear();

## 订单日志接口

-   写入订单日志

		方法名   ：add($params) 

		参数	 ：	$params['order_sn']		 : 订单号 
					$params['action']		 : 操作类型
					$params['operator_id']   : 操作者ID
					$params['operator_name'] : 操作者姓名
					$params['operator_type'] : 操作者类型(1:后台管理员,2:会员,3:商家[预留])
					$params['msg']			 : 详细内容(选填)

		位置     ：service/order_log_service.class.php

		@return  : [boolean]

		调用示例 ：model('order_log','order','service')->add($params);

-	根据订单号查日志

		方法名   ：get_by_order_sn($order_sn [,$order])	订单号 & 排序(选填,默认为id ASC)

		位置     ：service/order_log_service.class.php

		@return  : [result]

		调用示例 ：model('order_log','order','service')->get_by_order_sn($order_sn [,$order]);


## 订单跟踪

-   添加订单跟踪

		方法名   ：add($order_sn ,$msg ,$operator_type ,$operator_id ,$operator_name) 

		参数	 ：	$order_sn		 : 订单号 
					$msg		 	 : 内容
					$operator_type   : 操作者类型(1:后台管理员,2:会员,3:商家[预留])
					$operator_id 	 : 操作者ID
					$operator_name   : 操作者姓名

		位置     ：service/order_track_service.class.php

		@return  : [boolean]

		调用示例 ：model('order_track','order','service')->add($order_sn ,$msg ,$operator_type ,$operator_id ,$operator_name);


-	获取订单跟踪列表
	
		方法名   ：get_tracks_by_sn($order_sn ,$order) 

		参数	 ：	$order_sn		 : 订单号 
					$order		 	 : 排序(默认：id降序)

		位置     ：service/order_track_service.class.php

		@return  : [result]

		调用示例 ：model('order_track','order','service')->get_tracks_by_sn($order_sn ,$order);


## 订单发货单模版

-	修改发货单模版
	
		方法名   ：update($content)

		参数	 ：	$name		 : 名称 
					$content	 : 内容

		位置     ：service/order_tpl_parcel_service.class.php

		@return  : [result]

		调用示例 ：model('order_tpl_parcel','order','service')->update($content);

-	获取订单发货单模版详情

		方法名   ：get_tpl_parcel_by_id($id)

		参数	 ：	$id 		 : 主键ID

		位置     ：service/order_tpl_parcel_service.class.php

		@return  : [result]

		调用示例 ：model('order_tpl_parcel','order','service')->get_tpl_parcel_by_id($id);

-----------------------------------------------------------------------------------------------------

「操作条件判断」

	字段备注:

		delivery_method : 0 在线支付 ，1 货到付款

		status : 0 未确认 ，1 已确认 ，2 已完成 ，3 已取消 ，4 已回收 ，5 已删除

		pay_status : 0 未支付 ，1 已支付 ，2 未退款 3 已退款

		delivery_status : 0 未发货 ，1 已发货 ，2 已退货
	-----------------------------------------------------------------------------

	确认付款(仅在线支付使用) : 在线支付 & 未确认 & 未支付 & 未发货

	确认订单 : [货到付款 || 在线支付 & 已支付] & 未确认

	确认发货 : [货到付款 || 在线支付 & 已支付] & 已确认 & 未发货

	确认完成 : [货到付款 || 在线支付 & 已支付] & 已确认 & 已发货

	退货 : 已完成 & 已发货

	退款 : 已退货 & 未退款 & 已完成

	取消 : [货到付款 & 未确认 || 在线支付 & 未付款] & 未发货

	回收站 : 已取消
	
	已删除 : 已回收

-----------------------------------------------------------------------------------------------------

# 待完善:

1、检测未登录时的cookie('cart')，并转存到购物车里;