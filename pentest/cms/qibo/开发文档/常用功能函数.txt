比较常用的函数都放在这个文件里
/inc/function.inc.php


read_file($filename);
读取文件内容,$filename为相对或绝对路径都可以


write_file($filename,$data,$method);
把内容写入文件,$filename为相对或绝对路径都可以,
$data为要写入的内容,
$method默认是覆盖替换全新写入,如果给他赋值“a”的话，就是在原来内容的最后面追加入写入



del_file($path);
删除某个文件或者某个目录，$path为相对或绝对路径都可以


gdpic($srcFile,$dstFile,$width,$height);
图片的裁剪，$srcFile原来的图片路径，为相对或绝对路径都可以,
$dstFile,裁剪后的图片保存路径。
$width,$height 要裁剪成的宽度与高度


table_field($table,$field);
此函数有两个功能，第一种功能，检查某个表里，是否有某个字段，有的话返回1，没有的话，返回0
第二种功能是，$field字段名为空的时候，就列出表$table以数组方式返回


is_table($table);
检查某个表是否存在


upfile($upfile,$array);
附件上传函数，最后返回的是上传之后的新的文件名，不包含目录

一般情况会按照如下方式使用,其中postfile为表单中附件的表单名

$array[name]=is_array($postfile)?$_FILES[postfile][name]:$postfile_name;    //上传前的文件名
$array[path]=$webdb[updir]."/123/";					    //要保存在哪个目录,$webdb[updir]为系统附件目录名
$array[size]=is_array($postfile)?$_FILES[postfile][size]:$postfile_size;    //文件大小
	
$array[updateTable]=1;	//统计用户上传的文件占用空间大小,为0的时候，就不统计
$filename=upfile(is_array($postfile)?$_FILES[postfile][tmp_name]:$postfile,$array);




makepath($path);
生成新的目录，如果有多级，比如123/v/c/d也会一一的自动生成


tempdir($file);
获取附件的真实路径，如果附件目录没有，就返回远程服务器的
比如$file为123/bcd.jpg可以返回http://xxxx/upload_files/123/bcd.jpg


get_word($content,$length);
获取某段内容中前面几个字，$content文字内容,$length为多少个字节，一个汉字等于两个字节


filtrate($msg);
一般用在用户发表内容时，过滤字符中包括的单引号与双引号，及尖括号，因为这些比较危险。


html($html);
获取系统的模板,比如
html('index'); 将可以返回 d:\www\template\default\index.htm的真实路径


getpage($table,$choose,$url,$rows=20,$total='');
分页函数
如果$total总条数预先知道的话,$table,$choose,可以为空,不必要读数据库.
$url为页面跳转的URL如list.php?fid=$fid
$rows每页显示多少条

如果$total不赋值即为空的话,需要查数据库$table为表名,$choose为条件语句,如where fid=1



refreshto($url,$msg,$time=1);
页面跳转函数,一般用在成功操作的时候
$url为要跳转的目标网址,$msg为提示语,$time等待时间,为0的话,马上跳转,不出现提示语


showerr($showerrMsg);
报错提示页,比如操作不规范,就会有出错提示.$showerrMsg为提示语


mymd5($string,$action="EN");
字符串加密与解密,$string为字符串
$action="EN"时,是对字符串加密,="DE"时,是对字符串解密


set_cookie($name,$value,$cktime=0);
保存COOKIE记录,$name变量名,$value保存的内容,$cktime保存多久(单位是秒)


get_cookie($name);
获取COOKIE的内容,$name变量名



add_user($uid,$money,$about='');
积分处理函数,$uid用户的UID,$money增加或扣除的积分,负数即为扣除,$about为奖励或扣除的原因说明


delete_attachment($uid,$str);
删除内容中的附件,$uid为发布附件者的UID,$str为附件地址或者是文章内容,这里要使用$uid的目的是防止误删除



move_attachment($uid,$str,$newdir);
移动附件,比如文章中的附件内容目录移动,$uid用户的UID,$str为文章内容,$newdir为新的目录名,指附件中的目录名,不能是绝对路径


En_TruePath($content,$type=1);
发布内容时,对附件的绝对网址URL进行字符替换,方便今后更换网址是,不会变成死链.

$type=1时,发布,数据入库时使用,$type=0时,数据调用显示时使用


get_money($uid);
获取用户的积分总数,$uid为用户的UID



send_msg($uid,$title,$content,$fromuid=0);
站内短消息发送,$uid为收信人的UID,$title为消息标题,$content为消息内容,$fromuid为发出者的UID,


sms_send($mob,$content);
发送手机短信,$mob为手机号码,$content为短信内容


check_imgnum($yzimg);
检查用户提交的验证码是否正确,正解就返回1,错误就返回0


send_mail($email,$title,$content,$ifcheck=1);
发送邮件,$email为邮箱,$title邮件标题,$content邮件内容,$ifcheck为1的时候,发送失败,就报错,并停止发送,为0时,忽略失败的邮件


















